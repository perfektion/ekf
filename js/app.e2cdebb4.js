(function(e){function t(t){for(var o,i,l=t[0],s=t[1],c=t[2],u=0,f=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==r[s]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/ekf/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"10ff":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=n("5f5b"),a=n("b1e0"),i=(n("f9e3"),n("2dd8"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")}),l=[],s=n("2877"),c={},d=Object(s["a"])(c,i,l,!1,null,null,null),u=d.exports,f=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("h1",[e._v("Тестовое задание EKF Frontend-разработчик")]),n("b-row",[n("b-col",{staticClass:"mb-4"},[n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse",modifiers:{collapse:!0}}],attrs:{variant:"primary"}},[n("span",{staticClass:"when-open"},[e._v("Скрыть")]),n("span",{staticClass:"when-closed"},[e._v("Показать")]),e._v(" текст задания ")]),n("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse"}},[n("b-card",[n("h4",{staticClass:"card-text"},[e._v(" Сделать на nuxt.js или vue.js список товаров с ценами и форму редактирования товара ")]),n("p",[e._v("Требования:")]),n("ol",[n("li",[e._v(" Список товаров это простая <table> и должна включать поля - наименование (поле name), артикул (поле vendor_code), серия (поле series), цена (поле price), поле с кнопкой редактирования товара которая будет вызывать форму редактирования (можно модальную) в которой можно будет отредактировать наименование и артикул. ")]),n("li",[e._v(" Цену в списке товаров отформатировать без копеек ")]),n("li",[e._v(" Товаров в базе данных очень много, поэтому нужно сделать постраничный вывод в таблице (например, отображать по 40 товаров за раз) ")]),n("li",[e._v(" Сделать используя graphql api - https://sweet-hedgehog-55.hasura.app/v1/graphql ")]),n("li",[e._v(" Внешний вид - не принципиально, можно использовать bootstrap 4 ")])])])],1)],1)],1),n("EkfProductsTable")],1)},b=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-table",{attrs:{"sticky-header":"75vh",striped:"",hover:"",items:e.products,fields:e.fields,busy:e.$apollo.loading},scopedSlots:e._u([{key:"cell(index)",fn:function(t){return[e._v(" "+e._s(t.index+e.offset+1)+" ")]}},{key:"cell(prices)",fn:function(t){return[e._v(" "+e._s(Math.round(t.value[0].price))+" руб. ")]}},{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-danger my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[e._v(" Загрузка данных...")])],1)]},proxy:!0},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:t.toggleDetails}},[e._v(" "+e._s(t.detailsShowing?"Спрятать":"Показать")+" описание ")]),n("b-button",{attrs:{size:"sm"},on:{click:function(n){return e.editProduct(t.item,n.target)}}},[e._v(" Изменить ")])]}},{key:"row-details",fn:function(t){return[n("b-card",[e._v(" "+e._s(t.item.short_name)+" ")])]}}])}),n("b-row",[n("b-col",{attrs:{sm:"4",md:"5"}},[n("b-form-group",{staticClass:"mb-0",attrs:{label:"Кол-во строк","label-cols-sm":"6","label-cols-md":"4","label-cols-lg":"3","label-align-sm":"right","label-size":"sm","label-for":"perPageSelect"}},[n("b-form-select",{attrs:{id:"perPageSelect",size:"sm",options:e.pageOptions},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[n("b-form-select-option",{attrs:{value:e.AllProducts.length}},[e._v("Показать всё")])],1)],1)],1),n("b-col",{attrs:{sm:"7",md:"6"}},[e.$apollo.loading?e._e():n("b-pagination",{attrs:{"total-rows":e.rows,"per-page":e.perPage,align:"right","first-number":"","last-number":""},on:{input:e.showMore},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1),n("b-modal",{ref:"modal",attrs:{id:e.editModal.id,title:e.editModal.title},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:e.hideModal}},[e._v("Закрыть")]),n("b-button",{staticClass:"mt-3",attrs:{variant:"primary"},on:{click:e.handleOk}},[e._v("Сохранить")])]},proxy:!0}])},[n("b-form",[n("b-form-group",{attrs:{label:"Наименование:","label-for":"name"}},[n("b-form-input",{attrs:{id:"name",required:"",placeholder:"Наименование"},model:{value:e.editModal.content.name,callback:function(t){e.$set(e.editModal.content,"name",t)},expression:"editModal.content.name"}}),n("b-form-invalid-feedback",{attrs:{state:e.validationName}},[e._v(" Поле обязательно должно содержать данные. ")])],1),n("b-form-group",{attrs:{label:"Артикул:","label-for":"vendor_code"}},[n("b-form-input",{attrs:{id:"vendor_code",required:"",placeholder:"Артикул"},model:{value:e.editModal.content.vendor_code,callback:function(t){e.$set(e.editModal.content,"vendor_code",t)},expression:"editModal.content.vendor_code"}}),n("b-form-invalid-feedback",{attrs:{state:e.validationCode}},[e._v(" Поле обязательно должно содержать данные. ")])],1)],1)],1)],1)},v=[],h=(n("b0c0"),n("8785")),g=n("9530"),_=n.n(g);function y(){var e=Object(h["a"])(["\n  mutation UpdateProduct ($name: String, $id: String, $code: String){\n    UpdateProduct: update_products(_set:{name: $name, vendor_code: $code}, where: {id: {_eq: $id}}){\n      returning{\n        id,\n        name,\n        vendor_code,\n      }\n    }\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(h["a"])(["\n  query AllProducts{\n    AllProducts: products {\n      id\n    }\n  }\n"]);return w=function(){return e},e}function k(){var e=Object(h["a"])(["\n  query GetProducts ($limit: Int, $offset: Int){\n    products (limit: $limit, offset: $offset, order_by:{name: asc}) {\n      id\n      name\n      vendor_code\n      series\n      prices {\n        price\n      }\n      short_name\n    }\n  }\n"]);return k=function(){return e},e}var P=_()(k()),M=_()(w()),$=_()(y()),x={name:"EkfProductsTable",data:function(){return{totalRows:1,currentPage:1,perPage:10,offset:0,pageOptions:[10,20,30,40,50],editModal:{id:"edit-modal",title:"",content:{id:"",name:"",vendor_code:""}},AllProducts:[],fields:[{key:"index",label:"№",sortable:!1},{key:"name",label:"Наименование",sortable:!0},{key:"vendor_code",label:"Артикул",sortable:!0},{key:"series",label:"Серия",sortable:!0},{key:"prices",label:"Цена",sortable:!0},{key:"actions",label:""}]}},apollo:{AllProducts:{query:M},products:{query:P,variables:function(){return{limit:this.perPage,offset:this.offset}}}},computed:{rows:function(){return this.AllProducts.length},validationName:function(){return""!==this.editModal.content.name},validationCode:function(){return""!==this.editModal.content.vendor_code}},methods:{editProduct:function(e,t){this.editModal.title="Изменить ".concat(e.name),this.editModal.content.id=e.id,this.editModal.content.name=e.name,this.editModal.content.vendor_code=e.vendor_code,this.$root.$emit("bv::show::modal",this.editModal.id,t)},hideModal:function(){this.editModal.title="",this.editModal.content.name="",this.$refs.modal.hide()},handleOk:function(){var e=this;this.editModal.content.name&&this.editModal.content.vendor_code&&this.$apollo.mutate({mutation:$,variables:{id:this.editModal.content.id,name:this.editModal.content.name,code:this.editModal.content.vendor_code}}).then((function(){e.$refs.modal.hide()})).catch((function(e){window.console.error(e)}))},showMore:function(e){this.offset=this.perPage*e-this.perPage}}},O=x,j=Object(s["a"])(O,m,v,!1,null,null,null),C=j.exports,S={name:"Home",components:{EkfProductsTable:C}},q=S,E=(n("8d91"),Object(s["a"])(q,p,b,!1,null,"03ede24a",null)),T=E.exports;o["default"].use(f["a"]);var A=[{path:"/",name:"Home",component:T}],z=new f["a"]({mode:"history",base:"/ekf/",routes:A}),N=z,D=(n("99af"),n("d81d"),n("74ca")),F=n("478e"),G=n("e13b"),H=n("2bf2"),I=n("522d"),J=new F["a"]({uri:"https://sweet-hedgehog-55.hasura.app/v1/graphql/"}),L=Object(G["a"])((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map((function(e){var t=e.message,n=e.locations,o=e.path;return window.console.error("[GraphQL ошибка]: Сообщение: ".concat(t,", Место: ").concat(n,", Путь: ").concat(o))})),n&&window.console.log("[Network error]: ".concat(n))})),Q=new D["a"]({link:L.concat(J),cache:new H["a"],connectToDevTools:!0});o["default"].use(I["a"]);var U=new I["a"]({defaultClient:Q});o["default"].config.productionTip=!1,o["default"].use(r["a"]),o["default"].use(a["a"]),new o["default"]({router:N,apolloProvider:U,render:function(e){return e(u)}}).$mount("#app")},"8d91":function(e,t,n){"use strict";n("10ff")}});
//# sourceMappingURL=app.e2cdebb4.js.map